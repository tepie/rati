<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>relational analysis through images: Include/SQLSearch.php File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.1 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="annotated.html"><span>Classes</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
  </ul></div>
<h1>Include/SQLSearch.php File Reference</h1>
<p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SQLSearch_8php.html#b12cd109f8bfeb5c54fcbee02b32f79b">$search_index_structrue_name</a> = &quot;search_index&quot;</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SQLSearch_8php.html#f6a75c31149a6f822d616af724e5c932">$search_index_structure_primary_key</a> = &quot;id&quot;</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SQLSearch_8php.html#ea7a9a5151f7fa95e1376570b9d3dd60">$search_index_structure_object</a> = &quot;object_name&quot;</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SQLSearch_8php.html#5b9de6718325263176ec068b08dd4fa0">$search_index_structure_combined_attributes</a> = &quot;combined_attributes&quot;</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SQLSearch_8php.html#e8dad5937ba7144021b31421ca501898">$search_index_structure_rank</a> = &quot;rank&quot;</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SQLSearch_8php.html#7ba7c4435220ead60d5969a9fca28a20">$search_index_structure_weight</a> = &quot;weight&quot;</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SQLSearch_8php.html#b91c759053f7941885f95931e522fe71">$search_index_structure_perspective</a> = &quot;perspective&quot;</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SQLSearch_8php.html#c97b0a75ddd8cb90e97ca4e323087f75">$database_analyze_search_index</a> = &quot;OPTIMIZE TABLE `$search_index_structrue_name`;&quot;</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SQLSearch_8php.html#c1697acf0e9128cb6758ea1138fe7278">$search_index_delete_search_index</a> = &quot;delete from $search_index_structrue_name&quot;</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SQLSearch_8php.html#461fbf73ff22497e1bd117051b7c0566">$search_index_set_concat_max</a> = &quot;SET SESSION group_concat_max_len = 1048576&quot;</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SQLSearch_8php.html#4bedd1221cee92deb0aa5241d5c2f2f5">$search_index_left_union</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SQLSearch_8php.html#f1e78a4277f0923f10b8eb9ad57ff16a">$search_index_right_union</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SQLSearch_8php.html#513a03d5cc659f734619a342879bb7b9">$search_index_concat_select</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SQLSearch_8php.html#2a786be92afa24839df5b8df1b7db97f">$search_index_replace</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SQLSearch_8php.html#fcd464371dd16a8e7d07cc5a31f3dee0">$search_index_select_category_for_weight</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SQLSearch_8php.html#b20ea04e1e54d96514237565fc7b2c09">$search_index_update_weight_value</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SQLSearch_8php.html#4ce92bd5987d7bec2afb341f61642147">$search_index_exact_single_match</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SQLSearch_8php.html#e3ae3e62d3378b98fd6e867ba915b25f">$search_index_exact_perspective_single_match</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SQLSearch_8php.html#fb7607e48f43ab3e907a60133f5e3d56">$search_index_full_search</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SQLSearch_8php.html#3842cf506f307af3706ec0eaa8419b73">$search_index_perspective_full_search</a></td></tr>

</table>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="c97b0a75ddd8cb90e97ca4e323087f75"></a><!-- doxytag: member="SQLSearch.php::$database_analyze_search_index" ref="c97b0a75ddd8cb90e97ca4e323087f75" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$database_analyze_search_index = &quot;OPTIMIZE TABLE `$search_index_structrue_name`;&quot;          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="513a03d5cc659f734619a342879bb7b9"></a><!-- doxytag: member="SQLSearch.php::$search_index_concat_select" ref="513a03d5cc659f734619a342879bb7b9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$search_index_concat_select          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<b>Initial value:</b><div class="fragment"><pre class="fragment"> <span class="stringliteral">"select results.object,</span>
<span class="stringliteral">group_concat(</span>
<span class="stringliteral">concat_ws(\"=\",results.attribute,results.result) separator '; '</span>
<span class="stringliteral">) </span>
<span class="stringliteral">as rule, sum(results.$all_structure_as_count) as $all_structure_as_count </span>
<span class="stringliteral">from </span>
<span class="stringliteral">(($search_index_left_union) union ($search_index_right_union)) </span>
<span class="stringliteral">as results group by results.object"</span>
</pre></div>
</div>
</div><p>
<a class="anchor" name="c1697acf0e9128cb6758ea1138fe7278"></a><!-- doxytag: member="SQLSearch.php::$search_index_delete_search_index" ref="c1697acf0e9128cb6758ea1138fe7278" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$search_index_delete_search_index = &quot;delete from $search_index_structrue_name&quot;          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="e3ae3e62d3378b98fd6e867ba915b25f"></a><!-- doxytag: member="SQLSearch.php::$search_index_exact_perspective_single_match" ref="e3ae3e62d3378b98fd6e867ba915b25f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$search_index_exact_perspective_single_match          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<b>Initial value:</b><div class="fragment"><pre class="fragment"> <span class="stringliteral">"SELECT $search_index_structure_object,$search_index_structure_combined_attributes, $search_index_structure_perspective FROM `$search_index_structrue_name` </span>
<span class="stringliteral">WHERE $search_index_structure_object = \"%s\" and $search_index_structure_perspective = '%s' limit 1"</span>
</pre></div>
</div>
</div><p>
<a class="anchor" name="4ce92bd5987d7bec2afb341f61642147"></a><!-- doxytag: member="SQLSearch.php::$search_index_exact_single_match" ref="4ce92bd5987d7bec2afb341f61642147" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$search_index_exact_single_match          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<b>Initial value:</b><div class="fragment"><pre class="fragment"> <span class="stringliteral">"SELECT $search_index_structure_object,$search_index_structure_combined_attributes, $search_index_structure_perspective FROM `$search_index_structrue_name` </span>
<span class="stringliteral">WHERE $search_index_structure_object = \"%s\" limit 1"</span>
</pre></div>
</div>
</div><p>
<a class="anchor" name="fb7607e48f43ab3e907a60133f5e3d56"></a><!-- doxytag: member="SQLSearch.php::$search_index_full_search" ref="fb7607e48f43ab3e907a60133f5e3d56" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$search_index_full_search          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<b>Initial value:</b><div class="fragment"><pre class="fragment"> <span class="stringliteral">"SELECT $search_index_structure_object,$search_index_structure_combined_attributes, $search_index_structure_perspective FROM `$search_index_structrue_name` </span>
<span class="stringliteral">WHERE $search_index_structure_combined_attributes like ('%s') collate latin1_general_ci </span>
<span class="stringliteral">order by $search_index_structure_weight desc,$search_index_structure_rank desc limit %s,%s"</span>
</pre></div>
</div>
</div><p>
<a class="anchor" name="4bedd1221cee92deb0aa5241d5c2f2f5"></a><!-- doxytag: member="SQLSearch.php::$search_index_left_union" ref="4bedd1221cee92deb0aa5241d5c2f2f5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$search_index_left_union          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<b>Initial value:</b><div class="fragment"><pre class="fragment"> <span class="stringliteral">"select o.$object_structure_name as object,</span>
<span class="stringliteral">a.$attribute_structure_name as attribute,</span>
<span class="stringliteral">r.$relationship_structure_relation_value as result,</span>
<span class="stringliteral">0 as $all_structure_as_count </span>
<span class="stringliteral">from $relationship_structure_table_name as r,</span>
<span class="stringliteral">$object_structure_table_name as o, </span>
<span class="stringliteral">$attribute_structure_table_name as a </span>
<span class="stringliteral">where o.$object_structure_primary_id = r.$relationship_structure_object_fk and </span>
<span class="stringliteral">a.$attribute_structure_primary_id = r.$relationship_structure_attribute_fk and </span>
<span class="stringliteral">r.$relationship_structure_relation_value is not null"</span>
</pre></div>
</div>
</div><p>
<a class="anchor" name="3842cf506f307af3706ec0eaa8419b73"></a><!-- doxytag: member="SQLSearch.php::$search_index_perspective_full_search" ref="3842cf506f307af3706ec0eaa8419b73" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$search_index_perspective_full_search          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<b>Initial value:</b><div class="fragment"><pre class="fragment"> <span class="stringliteral">"SELECT $search_index_structure_object ,$search_index_structure_combined_attributes, $search_index_structure_perspective FROM `$search_index_structrue_name` </span>
<span class="stringliteral">WHERE $search_index_structure_combined_attributes like ('%s') collate latin1_general_ci and </span>
<span class="stringliteral">$search_index_structure_perspective = '%s' order by $search_index_structure_weight desc,$search_index_structure_rank desc limit %s,%s"</span>
</pre></div>
</div>
</div><p>
<a class="anchor" name="2a786be92afa24839df5b8df1b7db97f"></a><!-- doxytag: member="SQLSearch.php::$search_index_replace" ref="2a786be92afa24839df5b8df1b7db97f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$search_index_replace          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<b>Initial value:</b><div class="fragment"><pre class="fragment"> <span class="stringliteral">"replace into $search_index_structrue_name </span>
<span class="stringliteral">($search_index_structure_object,$search_index_structure_combined_attributes,$search_index_structure_rank) </span>
<span class="stringliteral">$search_index_concat_select"</span>
</pre></div>
</div>
</div><p>
<a class="anchor" name="f1e78a4277f0923f10b8eb9ad57ff16a"></a><!-- doxytag: member="SQLSearch.php::$search_index_right_union" ref="f1e78a4277f0923f10b8eb9ad57ff16a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$search_index_right_union          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<b>Initial value:</b><div class="fragment"><pre class="fragment"> <span class="stringliteral">"select o.$object_structure_name as object,</span>
<span class="stringliteral">a.$attribute_structure_name as attribute,</span>
<span class="stringliteral">oo.$object_structure_name as result, </span>
<span class="stringliteral">1 as $all_structure_as_count from </span>
<span class="stringliteral">$relationship_structure_table_name as r,</span>
<span class="stringliteral">$object_structure_table_name as o, </span>
<span class="stringliteral">$attribute_structure_table_name as a,</span>
<span class="stringliteral">(select * from $object_structure_table_name) as oo where </span>
<span class="stringliteral">o.$object_structure_primary_id = r.$relationship_structure_object_fk and </span>
<span class="stringliteral">a.$attribute_structure_primary_id = r.$relationship_structure_attribute_fk and </span>
<span class="stringliteral">r.$relationship_structure_relation_value is null and </span>
<span class="stringliteral">r.$relationship_structure_reference_fk = oo.$object_structure_primary_id"</span>
</pre></div>
</div>
</div><p>
<a class="anchor" name="fcd464371dd16a8e7d07cc5a31f3dee0"></a><!-- doxytag: member="SQLSearch.php::$search_index_select_category_for_weight" ref="fcd464371dd16a8e7d07cc5a31f3dee0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$search_index_select_category_for_weight          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<b>Initial value:</b><div class="fragment"><pre class="fragment"> <span class="stringliteral">"select obj_rel.$object_structure_name,</span>
<span class="stringliteral">object.$object_structure_name as category,</span>
<span class="stringliteral">i.$search_index_structure_rank </span>
<span class="stringliteral">from $object_structure_table_name,</span>
<span class="stringliteral">$search_index_structrue_name as i,</span>
<span class="stringliteral">(select $object_structure_table_name.$object_structure_name,</span>
<span class="stringliteral">$relationship_structure_table_name.$relationship_structure_reference_fk from </span>
<span class="stringliteral">$relationship_structure_table_name,</span>
<span class="stringliteral">$object_structure_table_name,$attribute_structure_table_name </span>
<span class="stringliteral">where $attribute_structure_table_name.$attribute_structure_name = '%s'</span>
<span class="stringliteral">and $attribute_structure_table_name.$attribute_structure_primary_id = $relationship_structure_table_name.$relationship_structure_attribute_fk and</span>
<span class="stringliteral">$relationship_structure_table_name.$relationship_structure_object_fk = object.$object_structure_primary_id and</span>
<span class="stringliteral">$relationship_structure_table_name.$relationship_structure_reference_fk != 0) as obj_rel </span>
<span class="stringliteral">where obj_rel.$relationship_structure_reference_fk = $object_structure_table_name.$object_structure_primary_id and </span>
<span class="stringliteral">i.$search_index_structure_object  = obj_rel.$object_structure_name"</span>
</pre></div>
</div>
</div><p>
<a class="anchor" name="461fbf73ff22497e1bd117051b7c0566"></a><!-- doxytag: member="SQLSearch.php::$search_index_set_concat_max" ref="461fbf73ff22497e1bd117051b7c0566" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$search_index_set_concat_max = &quot;SET SESSION group_concat_max_len = 1048576&quot;          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="b12cd109f8bfeb5c54fcbee02b32f79b"></a><!-- doxytag: member="SQLSearch.php::$search_index_structrue_name" ref="b12cd109f8bfeb5c54fcbee02b32f79b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$search_index_structrue_name = &quot;search_index&quot;          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="5b9de6718325263176ec068b08dd4fa0"></a><!-- doxytag: member="SQLSearch.php::$search_index_structure_combined_attributes" ref="5b9de6718325263176ec068b08dd4fa0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$search_index_structure_combined_attributes = &quot;combined_attributes&quot;          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="ea7a9a5151f7fa95e1376570b9d3dd60"></a><!-- doxytag: member="SQLSearch.php::$search_index_structure_object" ref="ea7a9a5151f7fa95e1376570b9d3dd60" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$search_index_structure_object = &quot;object_name&quot;          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="b91c759053f7941885f95931e522fe71"></a><!-- doxytag: member="SQLSearch.php::$search_index_structure_perspective" ref="b91c759053f7941885f95931e522fe71" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$search_index_structure_perspective = &quot;perspective&quot;          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="f6a75c31149a6f822d616af724e5c932"></a><!-- doxytag: member="SQLSearch.php::$search_index_structure_primary_key" ref="f6a75c31149a6f822d616af724e5c932" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$search_index_structure_primary_key = &quot;id&quot;          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="e8dad5937ba7144021b31421ca501898"></a><!-- doxytag: member="SQLSearch.php::$search_index_structure_rank" ref="e8dad5937ba7144021b31421ca501898" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$search_index_structure_rank = &quot;rank&quot;          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="7ba7c4435220ead60d5969a9fca28a20"></a><!-- doxytag: member="SQLSearch.php::$search_index_structure_weight" ref="7ba7c4435220ead60d5969a9fca28a20" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$search_index_structure_weight = &quot;weight&quot;          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="b20ea04e1e54d96514237565fc7b2c09"></a><!-- doxytag: member="SQLSearch.php::$search_index_update_weight_value" ref="b20ea04e1e54d96514237565fc7b2c09" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$search_index_update_weight_value          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<b>Initial value:</b><div class="fragment"><pre class="fragment"> <span class="stringliteral">"update $search_index_structrue_name set $search_index_structure_weight=%s, </span>
<span class="stringliteral">$search_index_structure_perspective='%s' where $search_index_structure_object = '%s'"</span>
</pre></div>
</div>
</div><p>
<hr size="1"><address style="align: right;"><small>Generated on Tue Apr 29 10:53:01 2008 for relational analysis through images by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.1 </small></address>
</body>
</html>
